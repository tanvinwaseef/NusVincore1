{"ast":null,"code":"import _objectSpread from\"F:/New folder/Downloads/NusVincore/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import{Heart,Calendar,Image as ImageIcon,Send,Music,Scroll,MessageCircle,User,Ruler,GraduationCap,Cake,Camera,AlertTriangle,LogOut,Reply,Trash2,Edit2,X,Check,ArrowLeft,Phone,Video,PhoneIncoming,ChevronLeft,ChevronRight,Play,Pause,SkipBack,SkipForward,Disc,Headphones,Plus,Link as LinkIcon,ExternalLink}from'lucide-react';import{initializeApp}from'firebase/app';import{getAuth,signInAnonymously,onAuthStateChanged}from'firebase/auth';import{getFirestore,collection,addDoc,onSnapshot,serverTimestamp,doc,updateDoc,deleteDoc,setDoc,query,orderBy}from'firebase/firestore';// --- 1. FIREBASE CONFIGURATION ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyDZAzllhZxQzNg63LBU44Ni_S83Z5R_6h8\",authDomain:\"nusvincore.firebaseapp.com\",projectId:\"nusvincore\",storageBucket:\"nusvincore.firebasestorage.app\",messagingSenderId:\"296006095052\",appId:\"1:296006095052:web:b89ad939130d7e3a89b269\",measurementId:\"G-2V4KD2Y2D6\"};const app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getFirestore(app);// --- 2. THEMES & CONFIG ---\nconst THEMES={tanvin:{id:'tanvin',bgGradient:'from-[#020617] via-[#0f172a] to-[#172554]',text:'text-blue-50',textAccent:'text-blue-300',glassCard:'bg-blue-900/20 backdrop-blur-2xl border border-blue-500/20 shadow-lg',input:'bg-blue-950/80 text-blue-100 border border-blue-500/20',heartBtn:'bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-400/30 text-blue-400 shadow-[0_0_15px_rgba(59,130,246,0.5)] backdrop-blur-md',button:'bg-blue-600 text-white shadow-md border border-blue-400/20',navBar:'bg-[#020617]/80 border-t border-blue-500/20',navIcon:'text-blue-100/80 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]',chatBubbleMe:'bg-blue-600 text-white shadow-md',chatBubbleThem:'bg-slate-800/80 text-blue-100 border border-white/5',orb1:'bg-blue-600/10',orb2:'bg-cyan-900/10'},nusra:{id:'nusra',bgGradient:'from-[#1a050d] via-[#2e0818] to-[#500724]',text:'text-pink-50',textAccent:'text-pink-300',glassCard:'bg-pink-900/20 backdrop-blur-2xl border border-pink-500/20 shadow-lg',input:'bg-pink-950/80 text-pink-100 border border-pink-500/20',heartBtn:'bg-gradient-to-br from-pink-500/20 to-pink-600/10 border border-pink-400/30 text-pink-400 shadow-[0_0_15px_rgba(236,72,153,0.5)] backdrop-blur-md',button:'bg-pink-600 text-white shadow-md border border-pink-400/20',navBar:'bg-[#1a050d]/80 border-t border-pink-500/20',navIcon:'text-pink-100/80 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]',chatBubbleMe:'bg-pink-600 text-white shadow-md',chatBubbleThem:'bg-gray-900/80 text-pink-100 border border-white/5',orb1:'bg-pink-900/10',orb2:'bg-purple-900/10'}};const CONFIG={startDate:\"2024-10-24T00:00:00\",memories:[{id:1,title:\"First Date\",date:\"Jan 1, 2023\",color:\"bg-pink-600\"},{id:2,title:\"Our Trip\",date:\"Mar 15, 2023\",color:\"bg-purple-600\"},{id:3,title:\"Best Birthday\",date:\"June 20, 2023\",color:\"bg-fuchsia-600\"},{id:4,title:\"Lazy Sunday\",date:\"Aug 5, 2023\",color:\"bg-rose-600\"},{id:5,title:\"The Concert\",date:\"Oct 12, 2023\",color:\"bg-indigo-600\"},{id:6,title:\"New Year's Eve\",date:\"Dec 31, 2023\",color:\"bg-violet-600\"}],profiles:{her:{id:\"nusra\",name:\"Nusra\",fullName:\"Maisha Tabassum Nusra\",age:\"14\",bday:\"Apr 2\",height:\"5'2\",class:\"Class 8\",defaultImage:\"nusra.jpg\"},me:{id:\"tanvin\",name:\"Tanvin\",fullName:\"Tanvin Waseef\",age:\"16\",bday:\"Oct 14\",height:\"5'9\",class:\"Class 9\",defaultImage:\"tanvin.jpg\"}},playlist:[{id:\"1\",title:\"Perfect\",artist:\"Ed Sheeran\",url:\"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3\",cover:\"bg-blue-500\"},{id:\"2\",title:\"Tum Hi Ho\",artist:\"Arijit Singh\",url:\"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3\",cover:\"bg-pink-500\"}]};// --- HELPERS ---\nconst compressImage=file=>{return new Promise(resolve=>{const reader=new FileReader();reader.readAsDataURL(file);reader.onload=event=>{const img=new Image();img.src=event.target.result;img.onload=()=>{const canvas=document.createElement('canvas');const MAX_WIDTH=600;const scaleSize=MAX_WIDTH/img.width;canvas.width=MAX_WIDTH;canvas.height=img.height*scaleSize;const ctx=canvas.getContext('2d');ctx.drawImage(img,0,0,canvas.width,canvas.height);resolve(canvas.toDataURL('image/jpeg',0.7));};};});};// --- COMPONENTS ---\nconst SetupRequiredScreen=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-screen w-full max-w-[56.25vh] mx-auto bg-black text-white p-8 text-center aspect-[9/16]\",children:[/*#__PURE__*/_jsx(AlertTriangle,{size:48,className:\"text-yellow-500 mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"One Last Step!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-300 mb-6\",children:\"Enable \\\"Anonymous Auth\\\" in Firebase Console.\"})]});const CallOverlay=_ref=>{let{isActive,type,partnerName,onEnd,theme}=_ref;if(!isActive)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-[100] bg-black/80 backdrop-blur-xl flex flex-col items-center justify-center animate-fade-in\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 rounded-full \".concat(theme.glassCard,\" flex items-center justify-center mb-8 animate-pulse ring-1 ring-white/20\"),children:type==='video'?/*#__PURE__*/_jsx(Video,{size:56,className:theme.text}):/*#__PURE__*/_jsx(Phone,{size:56,className:theme.text})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold \".concat(theme.text,\" mb-2 tracking-tight\"),children:partnerName}),/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(theme.text,\" opacity-60 mb-16 text-lg font-medium\"),children:type==='video'?'Video Calling...':'Calling...'}),/*#__PURE__*/_jsx(\"button\",{onClick:onEnd,className:\"w-20 h-20 rounded-full bg-red-500 flex items-center justify-center shadow-2xl active:scale-90 transition-transform hover:bg-red-600 border-4 border-black/20\",children:/*#__PURE__*/_jsx(PhoneIncoming,{size:32,className:\"text-white rotate-[135deg]\"})})]});};const PhotoUploader=_ref2=>{let{currentImage,onImageUpload,id}=_ref2;const fileInputRef=useRef(null);const handleFileChange=e=>{const file=e.target.files[0];if(file){const imageUrl=URL.createObjectURL(file);onImageUpload(imageUrl);localStorage.setItem(\"love_capsule_photo_\".concat(id),imageUrl);}};return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},className:\"w-16 h-16 rounded-full overflow-hidden relative cursor-pointer group shrink-0 bg-white/10 border-2 border-white/20\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleFileChange,className:\"hidden\",accept:\"image/*\"}),/*#__PURE__*/_jsx(\"img\",{src:currentImage,alt:\"Profile\",className:\"w-full h-full object-cover object-center\",onError:e=>{e.target.style.display='none';e.target.nextSibling.style.display='flex';}}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex flex-col items-center justify-center bg-black/40 backdrop-blur-[2px] transition-opacity \".concat(currentImage?'hidden':'flex'),children:/*#__PURE__*/_jsx(Camera,{size:16,className:\"text-white/80\"})})]});};const ModernGallery=_ref3=>{let{memories,theme}=_ref3;const[currentIndex,setCurrentIndex]=useState(0);const[isPlaying,setIsPlaying]=useState(true);const touchStart=useRef(0);const touchEnd=useRef(0);useEffect(()=>{let interval;if(isPlaying){interval=setInterval(()=>{setCurrentIndex(prev=>(prev+1)%memories.length);},3000);}return()=>clearInterval(interval);},[isPlaying,memories.length]);const handleSwipe=()=>{if(touchStart.current-touchEnd.current>50)setCurrentIndex(prev=>(prev+1)%memories.length);if(touchStart.current-touchEnd.current<-50)setCurrentIndex(prev=>(prev-1+memories.length)%memories.length);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-6 animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full aspect-[4/5] \".concat(theme.glassCard,\" rounded-[2rem] overflow-hidden shadow-2xl transition-all duration-500 ring-1 ring-white/10\"),onTouchStart:e=>touchStart.current=e.targetTouches[0].clientX,onTouchMove:e=>touchEnd.current=e.targetTouches[0].clientX,onTouchEnd:handleSwipe,children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 \".concat(memories[currentIndex].color,\" flex items-center justify-center transition-colors duration-500\"),children:/*#__PURE__*/_jsx(ImageIcon,{className:\"text-white/40 w-32 h-32\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent p-6 pt-20 backdrop-blur-[2px]\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-white mb-1 tracking-wide\",children:memories[currentIndex].title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(theme.text,\" opacity-80 font-medium\"),children:memories[currentIndex].date})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 right-4 flex gap-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsPlaying(!isPlaying),className:\"p-2 rounded-full bg-black/30 backdrop-blur-md text-white hover:bg-black/50 transition border border-white/10 active:scale-90\",children:isPlaying?/*#__PURE__*/_jsx(Pause,{size:16}):/*#__PURE__*/_jsx(Play,{size:16})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-bold \".concat(theme.text,\" mb-3 px-2 opacity-70 uppercase tracking-wider\"),children:\"Timeline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-3 overflow-x-auto pb-4 scrollbar-hide px-1 snap-x\",children:memories.map((mem,idx)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCurrentIndex(idx);setIsPlaying(false);},className:\"relative flex-shrink-0 w-16 h-16 rounded-2xl overflow-hidden transition-all duration-300 snap-start border border-white/10 \".concat(idx===currentIndex?'ring-2 ring-white scale-105 shadow-lg':'opacity-60 scale-95'),children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full \".concat(mem.color,\" flex items-center justify-center\"),children:/*#__PURE__*/_jsx(ImageIcon,{size:14,className:\"text-white/50\"})})},mem.id))})]})]});};// --- MUSIC PLAYER COMPONENT ---\nconst MusicPlayer=_ref4=>{let{theme,identity,partnerName}=_ref4;const[currentSong,setCurrentSong]=useState(null);const[isPlaying,setIsPlaying]=useState(false);const[partnerActivity,setPartnerActivity]=useState(null);const[songs,setSongs]=useState([...CONFIG.playlist]);const[showAddModal,setShowAddModal]=useState(false);const[newSongTitle,setNewSongTitle]=useState(\"\");const[newSongArtist,setNewSongArtist]=useState(\"\");const[newSongUrl,setNewSongUrl]=useState(\"\");const[progress,setProgress]=useState(0);const[duration,setDuration]=useState(0);const audioRef=useRef(new Audio());// 1. Cleanup on unmount\nuseEffect(()=>{const audio=audioRef.current;return()=>{audio.pause();audio.currentTime=0;};},[]);// 2. Fetch User Added Songs from Firestore\nuseEffect(()=>{const q=query(collection(db,'user_songs'),orderBy('createdAt','desc'));const unsubscribe=onSnapshot(q,snapshot=>{const userSongs=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setSongs([...CONFIG.playlist,...userSongs]);});return()=>unsubscribe();},[]);// 3. Sync with Partner\nuseEffect(()=>{const partnerId=identity==='tanvin'?'nusra':'tanvin';const unsubscribe=onSnapshot(doc(db,'music',partnerId),doc=>{if(doc.exists()){var _data$lastUpdated;const data=doc.data();if(data.isPlaying&&Date.now()-((_data$lastUpdated=data.lastUpdated)===null||_data$lastUpdated===void 0?void 0:_data$lastUpdated.toMillis())<60000){setPartnerActivity(data);}else{setPartnerActivity(null);}}});return()=>unsubscribe();},[identity]);// 4. Update My Status\nuseEffect(()=>{if(currentSong){setDoc(doc(db,'music',identity),{songId:currentSong.id,title:currentSong.title,artist:currentSong.artist,isPlaying:isPlaying,lastUpdated:serverTimestamp()});}else{// Explicitly set playing to false if no song loaded\nsetDoc(doc(db,'music',identity),{isPlaying:false,lastUpdated:serverTimestamp()});}},[currentSong,isPlaying,identity]);// 5. Audio Control\nuseEffect(()=>{const audio=audioRef.current;const handleTimeUpdate=()=>{setDuration(audio.duration||0);setProgress(audio.currentTime);};const handleEnded=()=>{playNext();};audio.addEventListener('timeupdate',handleTimeUpdate);audio.addEventListener('ended',handleEnded);if(currentSong){if(audio.src!==currentSong.url){audio.src=currentSong.url;}if(isPlaying){const playPromise=audio.play();if(playPromise!==undefined){playPromise.catch(error=>{if(error.name!=='AbortError')setIsPlaying(false);});}}else{audio.pause();}}else{audio.pause();audio.currentTime=0;}return()=>{audio.removeEventListener('timeupdate',handleTimeUpdate);audio.removeEventListener('ended',handleEnded);};},[currentSong,isPlaying]);const playSong=song=>{if((currentSong===null||currentSong===void 0?void 0:currentSong.id)===song.id){setIsPlaying(!isPlaying);}else{setCurrentSong(song);setIsPlaying(true);}};const playNext=()=>{if(!currentSong)return;const currentIndex=songs.findIndex(s=>s.id===currentSong.id);const nextIndex=(currentIndex+1)%songs.length;playSong(songs[nextIndex]);};const playPrev=()=>{if(!currentSong)return;const currentIndex=songs.findIndex(s=>s.id===currentSong.id);const prevIndex=(currentIndex-1+songs.length)%songs.length;playSong(songs[prevIndex]);};const handleSeek=e=>{const newTime=parseFloat(e.target.value);audioRef.current.currentTime=newTime;setProgress(newTime);};const syncWithPartner=()=>{if(partnerActivity){const song=songs.find(s=>s.id===partnerActivity.songId);if(song){setCurrentSong(song);setIsPlaying(true);}}};const handleAddLink=async e=>{e.preventDefault();if(!newSongTitle||!newSongArtist||!newSongUrl)return;try{await addDoc(collection(db,'user_songs'),{title:newSongTitle,artist:newSongArtist,url:newSongUrl,createdAt:serverTimestamp(),cover:\"bg-\".concat(Math.random()>0.5?'blue':'pink',\"-500\")});setNewSongTitle(\"\");setNewSongArtist(\"\");setNewSongUrl(\"\");setShowAddModal(false);}catch(err){console.error(\"Add song failed\",err);}};const formatTime=time=>{if(isNaN(time))return\"0:00\";const minutes=Math.floor(time/60);const seconds=Math.floor(time%60);return\"\".concat(minutes,\":\").concat(seconds<10?'0':'').concat(seconds);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full pb-24 animate-fade-in relative\",children:[partnerActivity&&partnerActivity.isPlaying&&/*#__PURE__*/_jsxs(\"div\",{className:\"mx-4 mt-4 mb-2 p-3 rounded-2xl bg-gradient-to-r from-pink-500/20 to-purple-500/20 border border-white/10 flex items-center justify-between backdrop-blur-md animate-pulse\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 overflow-hidden\",children:[/*#__PURE__*/_jsx(Headphones,{size:20,className:\"text-pink-300 shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"truncate\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-white/90 font-bold truncate\",children:[partnerName,\" is listening to...\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-white/60 truncate\",children:partnerActivity.title})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:syncWithPartner,className:\"bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-full text-[10px] font-bold text-white border border-white/10 transition-colors shrink-0\",children:\"Listen Together\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-6 my-6 aspect-square \".concat(theme.glassCard,\" rounded-[2.5rem] flex flex-col items-center justify-center relative overflow-hidden shadow-2xl\"),children:currentSong?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 \".concat(currentSong.cover,\" opacity-20 blur-2xl\")}),/*#__PURE__*/_jsx(\"div\",{className:\"w-40 h-40 rounded-full border-4 border-white/10 flex items-center justify-center shadow-2xl \".concat(isPlaying?'animate-[spin_10s_linear_infinite]':''),children:/*#__PURE__*/_jsx(Disc,{size:64,className:\"text-white/50\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 text-center z-10 px-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-1 truncate w-full\",children:currentSong.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(theme.text,\" opacity-70\"),children:currentSong.artist})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center text-white/40\",children:[/*#__PURE__*/_jsx(Music,{size:48,className:\"mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Select a song to play\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-8 flex flex-col gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:duration||0,value:progress,onChange:handleSeek,className:\"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-white\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-[10px] text-white/50 font-medium\",children:[/*#__PURE__*/_jsx(\"span\",{children:formatTime(progress)}),/*#__PURE__*/_jsx(\"span\",{children:formatTime(duration)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-4 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:playPrev,className:\"text-white/60 hover:text-white transition active:scale-90\",children:/*#__PURE__*/_jsx(SkipBack,{size:32})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsPlaying(!isPlaying),className:\"w-16 h-16 rounded-full flex items-center justify-center bg-white text-black shadow-xl active:scale-95 transition-all hover:scale-105\",children:isPlaying?/*#__PURE__*/_jsx(Pause,{size:28,fill:\"currentColor\"}):/*#__PURE__*/_jsx(Play,{size:28,fill:\"currentColor\",className:\"ml-1\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:playNext,className:\"text-white/60 hover:text-white transition active:scale-90\",children:/*#__PURE__*/_jsx(SkipForward,{size:32})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-bold \".concat(theme.text,\" uppercase tracking-wider opacity-60\"),children:\"Library\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddModal(true),className:\"p-2 rounded-full bg-white/10 hover:bg-white/20 transition\",children:/*#__PURE__*/_jsx(Plus,{size:16,className:\"text-white\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-6 flex flex-col gap-3 pb-4\",children:songs.map(song=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>playSong(song),className:\"flex items-center gap-4 p-3 rounded-2xl transition-all \".concat((currentSong===null||currentSong===void 0?void 0:currentSong.id)===song.id?'bg-white/10 border border-white/10':'hover:bg-white/5 border border-transparent'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center shrink-0\",children:/*#__PURE__*/_jsx(Music,{size:16,className:\"text-white/50\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-bold \".concat((currentSong===null||currentSong===void 0?void 0:currentSong.id)===song.id?'text-white':theme.text,\" truncate\"),children:song.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-white/40 truncate\",children:song.artist})]}),(currentSong===null||currentSong===void 0?void 0:currentSong.id)===song.id&&isPlaying&&/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-green-400 animate-pulse\"})]},song.id))}),showAddModal&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 z-50 bg-black/80 backdrop-blur-md flex items-center justify-center p-6 animate-fade-in\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(theme.glassCard,\" p-6 rounded-[2rem] w-full max-w-sm\"),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white mb-4\",children:\"Add Music Link\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddLink,className:\"flex flex-col gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Song Title\",value:newSongTitle,onChange:e=>setNewSongTitle(e.target.value),className:\"p-3 rounded-xl \".concat(theme.input,\" text-sm bg-black/40 outline-none\"),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Artist Name\",value:newSongArtist,onChange:e=>setNewSongArtist(e.target.value),className:\"p-3 rounded-xl \".concat(theme.input,\" text-sm bg-black/40 outline-none\"),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"MP3 URL (Direct Link)\",value:newSongUrl,onChange:e=>setNewSongUrl(e.target.value),className:\"p-3 rounded-xl \".concat(theme.input,\" text-sm bg-black/40 outline-none\"),required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddModal(false),className:\"flex-1 p-3 rounded-xl bg-white/5 text-white/70 text-sm hover:bg-white/10 transition\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 p-3 rounded-xl \".concat(theme.button,\" text-sm flex items-center justify-center gap-2\"),children:\"Add Song\"})]})]})]})})]});};const IdentitySelector=_ref5=>{let{onSelect,profileImages,updateImage}=_ref5;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-screen w-full max-w-[56.25vh] mx-auto bg-gradient-to-b from-[#020617] via-[#1e1b4b] to-[#312e81] text-white p-6 relative overflow-hidden aspect-[9/16]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-transparent via-black/30 to-black/80 pointer-events-none\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-10 z-10 text-center text-white drop-shadow-lg tracking-tight\",children:\"Who are you?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-6 w-full max-w-xs z-10\",children:['me','her'].map(key=>{const profile=CONFIG.profiles[key];const theme=THEMES[profile.id];const buttonStyle=profile.id==='tanvin'?'bg-blue-900/20 border-blue-500/20 hover:bg-blue-900/40':'bg-pink-900/20 border-pink-500/20 hover:bg-pink-900/40';return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(buttonStyle,\" backdrop-blur-xl border p-4 rounded-[2rem] flex items-center gap-5 transition-all duration-300 active:scale-95 shadow-[0_8px_32px_rgba(0,0,0,0.3)] group\"),children:[/*#__PURE__*/_jsx(\"div\",{onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsx(PhotoUploader,{id:profile.id,currentImage:profileImages[profile.id],onImageUpload:url=>updateImage(profile.id,url)})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onSelect(profile.id),className:\"flex-1 text-left h-full flex flex-col justify-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-2xl \".concat(theme.text,\" group-hover:text-white transition-colors\"),children:profile.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[11px] \".concat(theme.text,\" opacity-60 tracking-widest uppercase\"),children:\"Tap to Enter\"})]})]},key);})})]});};const FloatingHeart=_ref6=>{let{id,color,removeHeart}=_ref6;const[style]=useState(()=>({left:\"\".concat(Math.random()*80+10,\"%\"),animationDuration:\"\".concat(3+Math.random()*2,\"s\")}));useEffect(()=>{const timer=setTimeout(()=>removeHeart(id),4000);return()=>clearTimeout(timer);},[id,removeHeart]);return/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 \".concat(color,\" pointer-events-none animate-float z-50\"),style:style,children:/*#__PURE__*/_jsx(Heart,{fill:\"currentColor\",size:24+Math.random()*24})});};const RelationshipTimer=_ref7=>{let{theme}=_ref7;const[time,setTime]=useState({days:0,hours:0,minutes:0,seconds:0});useEffect(()=>{const updateTime=()=>{const diff=new Date().getTime()-new Date(CONFIG.startDate).getTime();setTime({days:Math.floor(diff/(1000*60*60*24)),hours:Math.floor(diff%(1000*60*60*24)/(1000*60*60)),minutes:Math.floor(diff%(1000*60*60)/(1000*60)),seconds:Math.floor(diff%(1000*60)/1000)});};const timer=setInterval(updateTime,1000);updateTime();return()=>clearInterval(timer);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(theme.glassCard,\" rounded-[2rem] p-6 mb-6 hover:shadow-[0_0_30px_rgba(255,255,255,0.1)] transition-shadow duration-500\"),children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-sm font-bold \".concat(theme.text,\" mb-4 flex items-center gap-2 pl-1 opacity-90 tracking-widest uppercase\"),children:[/*#__PURE__*/_jsx(Calendar,{className:theme.textAccent,size:14}),\" Time Together\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-3 text-center\",children:[{l:'Days',v:time.days},{l:'Hrs',v:time.hours},{l:'Mins',v:time.minutes},{l:'Secs',v:time.seconds}].map((item,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col bg-white/5 rounded-2xl py-3 backdrop-blur-sm border border-white/10 shadow-inner\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold \".concat(theme.textAccent,\" font-mono drop-shadow-md\"),children:item.v}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[8px] uppercase tracking-widest \".concat(theme.text,\" opacity-50 mt-1\"),children:item.l})]},i))})]});};const ProfileSection=_ref8=>{let{profileImages,updateImage,theme,partnerStatus}=_ref8;return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-4 mb-6\",children:[CONFIG.profiles.me,CONFIG.profiles.her].map((profile,i)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(theme.glassCard,\" rounded-[2rem] p-5 flex flex-col items-center text-center relative overflow-hidden hover:bg-white/5 transition-colors duration-300\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 relative\",children:[/*#__PURE__*/_jsx(PhotoUploader,{id:profile.id,currentImage:profileImages[profile.id],onImageUpload:url=>updateImage(profile.id,url)}),(profile.id==='nusra'&&theme.id==='tanvin'||profile.id==='tanvin'&&theme.id==='nusra')&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 right-0 w-4 h-4 rounded-full border-[3px] border-[#0f172a] \".concat(partnerStatus==='online'?'bg-green-400 shadow-[0_0_10px_#22c55e]':'bg-gray-500')})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"\".concat(theme.text,\" font-bold text-lg mb-1 tracking-tight\"),children:profile.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5 text-[10px] \".concat(theme.text,\" opacity-70 bg-white/5 border border-white/10 px-3 py-1 rounded-full shadow-sm\"),children:[/*#__PURE__*/_jsx(Cake,{size:10}),\" \",/*#__PURE__*/_jsx(\"span\",{children:profile.bday})]})]},i);})});};const MessageMenu=_ref9=>{let{isMe,onClose,onReply,onEdit,onDelete,theme}=_ref9;return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-full mb-2 right-0 bg-black/80 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-2xl p-2 flex flex-col gap-1 min-w-[120px] z-50 overflow-hidden animate-fade-in origin-bottom-right\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();onReply();},className:\"flex items-center gap-3 px-4 py-3 text-[12px] font-medium \".concat(theme.text,\" hover:bg-white/10 transition-all rounded-xl active:scale-95\"),children:[/*#__PURE__*/_jsx(Reply,{size:16}),\" Reply\"]}),isMe&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();onEdit();},className:\"flex items-center gap-3 px-4 py-3 text-[12px] font-medium \".concat(theme.text,\" hover:bg-white/10 transition-all rounded-xl active:scale-95\"),children:[/*#__PURE__*/_jsx(Edit2,{size:16}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();onDelete();},className:\"flex items-center gap-3 px-4 py-3 text-[12px] font-medium text-red-400 hover:bg-red-500/10 transition-all rounded-xl active:scale-95\",children:[/*#__PURE__*/_jsx(Trash2,{size:16}),\" Unsend\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-px bg-white/10 my-1 mx-2\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onClose();},className:\"text-[11px] py-2 \".concat(theme.text,\" opacity-50 hover:opacity-100 transition-opacity text-center\"),children:\"Cancel\"})]});};const ChatFeature=_ref0=>{let{identity,user,theme,partnerStatus,startCall}=_ref0;const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState(\"\");const[replyingTo,setReplyingTo]=useState(null);const[editingMsg,setEditingMsg]=useState(null);const[menuOpenId,setMenuOpenId]=useState(null);const[uploading,setUploading]=useState(false);const[isConnected,setIsConnected]=useState(false);const messagesEndRef=useRef(null);const fileInputRef=useRef(null);useEffect(()=>{if(!user)return;const statusRef=doc(db,'status','connection-test');const unsubscribeStatus=onSnapshot(statusRef,()=>setIsConnected(true),()=>setIsConnected(false));const q=query(collection(db,'messages'),orderBy('timestamp','asc'));const unsubscribe=onSnapshot(q,snapshot=>{const msgs=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setMessages(msgs);setTimeout(()=>{var _messagesEndRef$curre;return(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});},100);});return()=>{unsubscribe();unsubscribeStatus();};},[user]);const handleSend=async e=>{e.preventDefault();if(!newMessage.trim()&&!uploading)return;const msgToSend=newMessage;setNewMessage(\"\");if(editingMsg){try{await updateDoc(doc(db,'messages',editingMsg.id),{text:msgToSend});setEditingMsg(null);}catch(e){}return;}try{const replyText=replyingTo?replyingTo.text||(replyingTo.image?\"Photo\":\"Message\"):null;await addDoc(collection(db,'messages'),{text:msgToSend,senderId:identity,senderName:CONFIG.profiles[identity==='tanvin'?'me':'her'].name,timestamp:Date.now(),replyTo:replyingTo?{id:replyingTo.id,text:replyText||\"\",sender:replyingTo.senderName}:null});setReplyingTo(null);}catch(error){}};const handleImageUpload=async e=>{const file=e.target.files[0];if(!file)return;setUploading(true);try{const base64=await compressImage(file);await addDoc(collection(db,'messages'),{image:base64,text:\"\",senderId:identity,senderName:CONFIG.profiles[identity==='tanvin'?'me':'her'].name,timestamp:Date.now()});}catch(err){}setUploading(false);};const handleDelete=async id=>{try{await deleteDoc(doc(db,'messages',id));setMenuOpenId(null);}catch(e){}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full relative\",children:[!isConnected&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-0 right-0 bg-red-500/80 text-white text-[10px] text-center py-1 z-50 backdrop-blur-sm\",children:\"Connecting...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-4 overflow-y-auto flex flex-col gap-4 scrollbar-hide\",children:[messages.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center \".concat(theme.text,\" opacity-30 text-sm font-medium italic\"),children:\"Start a conversation...\"}),messages.map(msg=>{const isMe=msg.senderId===identity;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col \".concat(isMe?'items-end self-end':'items-start self-start',\" relative group max-w-[85%] animate-fade-in-up\"),children:[msg.replyTo&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-[10px] mb-1 px-3 py-1.5 rounded-2xl bg-white/10 text-white/70 truncate w-full border-l-2 border-white/30 backdrop-blur-sm\",children:[\"Replying to \",msg.replyTo.sender,\": \",msg.replyTo.text]}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>setMenuOpenId(menuOpenId===msg.id?null:msg.id),className:\"px-4 py-3 rounded-[1.5rem] text-sm cursor-pointer transition-all duration-200 active:scale-95 \".concat(isMe?theme.chatBubbleMe:theme.chatBubbleThem,\" \").concat(isMe?'rounded-br-sm':'rounded-bl-sm',\" w-fit break-all whitespace-pre-wrap shadow-lg\"),children:msg.image?/*#__PURE__*/_jsx(\"img\",{src:msg.image,alt:\"Shared\",className:\"rounded-xl max-w-full max-h-[200px] object-cover\"}):/*#__PURE__*/_jsx(\"p\",{className:\"leading-relaxed tracking-wide\",children:msg.text})}),menuOpenId===msg.id&&/*#__PURE__*/_jsx(MessageMenu,{isMe:isMe,onClose:()=>setMenuOpenId(null),onReply:()=>{setReplyingTo(msg);setMenuOpenId(null);},onEdit:()=>{setEditingMsg(msg);setNewMessage(msg.text);setMenuOpenId(null);},onDelete:()=>handleDelete(msg.id),theme:theme}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[9px] \".concat(theme.text,\" opacity-40 mt-1 px-2 font-medium tracking-wider\"),children:new Date(msg.timestamp).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]},msg.id);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),replyingTo&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-black/40 backdrop-blur-md border-t border-white/10 p-3 px-4 text-xs text-white/80 mx-3 rounded-t-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"truncate opacity-90\",children:[\"Replying to \",/*#__PURE__*/_jsx(\"b\",{children:replyingTo.senderName})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setReplyingTo(null),children:/*#__PURE__*/_jsx(X,{size:14})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSend,className:\"flex gap-3 items-center p-2.5 m-3 rounded-[2.5rem] \".concat(theme.input,\" shadow-[0_8px_32px_rgba(0,0,0,0.3)] relative z-20 backdrop-blur-xl border border-white/10\"),children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleImageUpload,className:\"hidden\",accept:\"image/*\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _fileInputRef$current2;return(_fileInputRef$current2=fileInputRef.current)===null||_fileInputRef$current2===void 0?void 0:_fileInputRef$current2.click();},className:\"p-3 rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-all active:scale-90 \".concat(uploading?'animate-pulse':''),children:/*#__PURE__*/_jsx(Camera,{size:20})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newMessage,onChange:e=>setNewMessage(e.target.value),placeholder:editingMsg?\"Edit message...\":\"Type a message...\",className:\"flex-1 bg-transparent text-sm focus:outline-none text-white/90 placeholder-white/40 min-w-0 px-2 font-medium\"}),editingMsg&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setEditingMsg(null);setNewMessage(\"\");},className:\"p-2 text-white/50 hover:text-white\",children:/*#__PURE__*/_jsx(X,{size:18})}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"p-3 rounded-full \".concat(theme.button,\" shadow-lg shrink-0 active:scale-90 transition-all hover:brightness-110\"),children:[/*#__PURE__*/_jsx(Check,{size:20,className:editingMsg?\"\":\"hidden\"}),/*#__PURE__*/_jsx(Send,{size:20,className:!editingMsg?\"\":\"hidden\"})]})]})]});};export default function App(){const[identity,setIdentity]=useState(null);const[user,setUser]=useState(null);const[activeTab,setActiveTab]=useState('home');const[hearts,setHearts]=useState([]);const[authError,setAuthError]=useState(false);const[partnerStatus,setPartnerStatus]=useState('offline');const[profileImages,setProfileImages]=useState({tanvin:CONFIG.profiles.me.defaultImage,nusra:CONFIG.profiles.her.defaultImage});const[calling,setCalling]=useState(false);const[callType,setCallType]=useState('audio');useEffect(()=>{const initAuth=async()=>{try{await signInAnonymously(auth);}catch(error){if(error.code==='auth/configuration-not-found')setAuthError(true);}};initAuth();return onAuthStateChanged(auth,u=>setUser(u));},[]);useEffect(()=>{const savedId=localStorage.getItem('love_capsule_identity');if(savedId)setIdentity(savedId);setProfileImages(prev=>({tanvin:localStorage.getItem('love_capsule_photo_tanvin')||prev.tanvin,nusra:localStorage.getItem('love_capsule_photo_nusra')||prev.nusra}));},[]);useEffect(()=>{if(!identity||!user)return;const updateMyStatus=async()=>{try{await setDoc(doc(db,'status',identity),{lastSeen:serverTimestamp()});}catch(e){}};updateMyStatus();const interval=setInterval(updateMyStatus,10000);const partnerId=identity==='tanvin'?'nusra':'tanvin';const unsubscribe=onSnapshot(doc(db,'status',partnerId),doc=>{if(doc.exists()){var _data$lastSeen;const data=doc.data();const lastSeen=(_data$lastSeen=data.lastSeen)!==null&&_data$lastSeen!==void 0&&_data$lastSeen.toMillis?data.lastSeen.toMillis():0;setPartnerStatus(Date.now()-lastSeen<15000?'online':'offline');}});return()=>{clearInterval(interval);unsubscribe();};},[identity,user]);const handleIdentitySelect=id=>{setIdentity(id);localStorage.setItem('love_capsule_identity',id);};const handleLogout=()=>{setIdentity(null);localStorage.removeItem('love_capsule_identity');};const updateProfileImage=(id,url)=>{setProfileImages(prev=>_objectSpread(_objectSpread({},prev),{},{[id]:url}));};useEffect(()=>{if(!user||!identity)return;const unsubscribe=onSnapshot(collection(db,'signals'),snapshot=>{snapshot.docChanges().forEach(change=>{if(change.type===\"added\"){const data=change.doc.data();if(data.timestamp>Date.now()-5000&&data.senderId!==identity){const heartColor=data.senderId==='tanvin'?'text-blue-500':'text-pink-500';spawnMultipleHearts(heartColor);}}});});return()=>unsubscribe();},[user,identity]);const sendRemoteHeart=async()=>{const theme=THEMES[identity];spawnHeart(theme.heartColor);if(!user||!identity)return;try{await addDoc(collection(db,'signals'),{type:'heart',senderId:identity,timestamp:Date.now()});}catch(e){}};const startCall=type=>{setCallType(type);setCalling(true);};useEffect(()=>{const styleSheet=document.createElement(\"style\");styleSheet.innerText=\" @keyframes float { 0% { transform: translateY(0) scale(1); opacity: 0; } 10% { opacity: 0.8; } 100% { transform: translateY(-100vh) scale(1.2); opacity: 0; } } .animate-float { animation-name: float; animation-timing-function: ease-in; } .scrollbar-hide::-webkit-scrollbar { display: none; } .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; } \";document.head.appendChild(styleSheet);return()=>document.head.removeChild(styleSheet);},[]);const removeHeart=useCallback(id=>{setHearts(h=>h.filter(heart=>heart.id!==id));},[]);const spawnHeart=useCallback(colorClass=>{setHearts(h=>[...h,{id:\"\".concat(Date.now(),\"-\").concat(Math.random()),color:colorClass}]);},[]);const spawnMultipleHearts=useCallback(color=>{let c=0;const i=setInterval(()=>{spawnHeart(color);c++;if(c>8)clearInterval(i);},200);},[spawnHeart]);if(authError)return/*#__PURE__*/_jsx(SetupRequiredScreen,{});if(!identity)return/*#__PURE__*/_jsx(IdentitySelector,{onSelect:handleIdentitySelect,profileImages:profileImages,updateImage:updateProfileImage});const theme=THEMES[identity];const myProfile=CONFIG.profiles[identity==='tanvin'?'me':'her'];const partnerProfile=CONFIG.profiles[identity==='tanvin'?'her':'me'];return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen w-full max-w-[56.25vh] mx-auto bg-gradient-to-b \".concat(theme.bgGradient,\" flex flex-col relative overflow-hidden shadow-2xl font-sans border-x-0 aspect-[9/16]\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-[-10%] left-[-10%] w-[600px] h-[600px] \".concat(theme.orb1,\" rounded-full blur-[150px] pointer-events-none\")}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-[-10%] right-[-10%] w-[600px] h-[600px] \".concat(theme.orb2,\" rounded-full blur-[150px] pointer-events-none\")}),/*#__PURE__*/_jsx(CallOverlay,{isActive:calling,type:callType,partnerName:partnerProfile.name,onEnd:()=>setCalling(false),theme:theme}),/*#__PURE__*/_jsx(\"header\",{className:\"px-5 py-4 z-10 flex justify-between items-center bg-transparent relative\",children:activeTab==='messages'?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 w-full animate-fade-in\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('home'),className:\"p-2.5 rounded-full \".concat(theme.glassCard,\" \").concat(theme.text,\" hover:bg-white/10 transition-all active:scale-90 shadow-lg\"),children:/*#__PURE__*/_jsx(ArrowLeft,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full shadow-[0_0_15px_rgba(255,255,255,0.1)] overflow-hidden border \".concat(theme.id==='tanvin'?'border-pink-400/30':'border-blue-400/30'),children:/*#__PURE__*/_jsx(\"img\",{src:profileImages[partnerProfile.id],className:\"w-full h-full object-cover\",onError:e=>e.target.style.display='none'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold \".concat(theme.text,\" drop-shadow-md tracking-wide\"),children:partnerProfile.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full \".concat(partnerStatus==='online'?'bg-green-400 shadow-[0_0_10px_#22c55e]':'bg-gray-500')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] \".concat(theme.text,\" opacity-60 tracking-wide uppercase font-medium\"),children:partnerStatus==='online'?'Online':'Offline'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startCall('audio'),className:\"p-2.5 rounded-full \".concat(theme.glassCard,\" \").concat(theme.text,\" hover:bg-white/10 transition-all active:scale-90 shadow-lg\"),children:/*#__PURE__*/_jsx(Phone,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>startCall('video'),className:\"p-2.5 rounded-full \".concat(theme.glassCard,\" \").concat(theme.text,\" hover:bg-white/10 transition-all active:scale-90 shadow-lg\"),children:/*#__PURE__*/_jsx(Video,{size:18})})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between w-full animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-11 h-11 rounded-full shadow-[0_0_20px_rgba(255,255,255,0.1)] overflow-hidden border-2 \".concat(theme.id==='tanvin'?'border-blue-400/30':'border-pink-400/30'),children:/*#__PURE__*/_jsx(\"img\",{src:profileImages[myProfile.id],className:\"w-full h-full object-cover\",onError:e=>e.target.style.display='none'})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-xl font-bold \".concat(theme.text,\" drop-shadow-lg tracking-tight\"),children:[\"Hi, \",myProfile.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full \".concat(partnerStatus==='online'?'bg-green-400 shadow-[0_0_10px_#22c55e]':'bg-gray-500')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] \".concat(theme.text,\" opacity-60 tracking-wide uppercase font-bold\"),children:partnerStatus==='online'?'Online':'Offline'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"w-10 h-10 rounded-full flex items-center justify-center \".concat(theme.glassCard,\" hover:bg-white/10 transition-all active:scale-90 shadow-lg\"),children:/*#__PURE__*/_jsx(LogOut,{size:18,className:theme.text})}),/*#__PURE__*/_jsx(\"button\",{onClick:sendRemoteHeart,className:\"w-10 h-10 rounded-full flex items-center justify-center \".concat(theme.heartBtn,\" transition-all active:scale-90 hover:brightness-110\"),children:/*#__PURE__*/_jsx(Heart,{fill:\"currentColor\",size:18})})]})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 px-4 overflow-y-auto z-10 scrollbar-hide \".concat(activeTab==='messages'?'pb-0 px-0':'pb-28'),children:[activeTab==='home'&&/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fade-in pt-2\",children:[/*#__PURE__*/_jsx(ProfileSection,{profileImages:profileImages,updateImage:updateProfileImage,theme:theme,partnerStatus:partnerStatus}),/*#__PURE__*/_jsx(RelationshipTimer,{theme:theme})]}),activeTab==='gallery'&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-fade-in pt-2\",children:/*#__PURE__*/_jsx(ModernGallery,{memories:CONFIG.memories,theme:theme})}),activeTab==='music'&&/*#__PURE__*/_jsx(MusicPlayer,{theme:theme,identity:identity,partnerName:partnerProfile.name}),activeTab==='messages'&&/*#__PURE__*/_jsx(ChatFeature,{identity:identity,user:user,theme:theme,startCall:startCall})]}),hearts.map(h=>/*#__PURE__*/_jsx(FloatingHeart,{id:h.id,color:h.color,removeHeart:removeHeart},h.id)),activeTab!=='messages'&&/*#__PURE__*/_jsxs(\"nav\",{className:\"absolute bottom-6 left-6 right-6 h-14 rounded-full \".concat(theme.navBar,\" backdrop-blur-2xl flex justify-between items-center px-8 shadow-[0_10px_40px_rgba(0,0,0,0.6)] z-20 border border-white/10\"),children:[/*#__PURE__*/_jsx(TabButton,{active:activeTab==='home',onClick:()=>setActiveTab('home'),icon:Heart,theme:theme}),/*#__PURE__*/_jsx(TabButton,{active:activeTab==='gallery',onClick:()=>setActiveTab('gallery'),icon:ImageIcon,theme:theme}),/*#__PURE__*/_jsx(TabButton,{active:activeTab==='music',onClick:()=>setActiveTab('music'),icon:Music,theme:theme}),/*#__PURE__*/_jsx(TabButton,{active:activeTab==='messages',onClick:()=>setActiveTab('messages'),icon:MessageCircle,theme:theme})]})]});}const TabButton=_ref1=>{let{active,icon:Icon,onClick,theme}=_ref1;return/*#__PURE__*/_jsx(\"button\",{onClick:onClick,className:\"relative flex items-center justify-center w-10 h-10 rounded-full transition-all duration-300 \".concat(active?\"\".concat(theme.navIcon,\" scale-110\"):\"text-white/40 hover:text-white/70 hover:scale-105\"),children:/*#__PURE__*/_jsx(Icon,{size:20,fill:active?\"currentColor\":\"none\",strokeWidth:active?0:1.5})});};","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Heart","Calendar","Image","ImageIcon","Send","Music","Scroll","MessageCircle","User","Ruler","GraduationCap","Cake","Camera","AlertTriangle","LogOut","Reply","Trash2","Edit2","X","Check","ArrowLeft","Phone","Video","PhoneIncoming","ChevronLeft","ChevronRight","Play","Pause","SkipBack","SkipForward","Disc","Headphones","Plus","Link","LinkIcon","ExternalLink","initializeApp","getAuth","signInAnonymously","onAuthStateChanged","getFirestore","collection","addDoc","onSnapshot","serverTimestamp","doc","updateDoc","deleteDoc","setDoc","query","orderBy","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","THEMES","tanvin","id","bgGradient","text","textAccent","glassCard","input","heartBtn","button","navBar","navIcon","chatBubbleMe","chatBubbleThem","orb1","orb2","nusra","CONFIG","startDate","memories","title","date","color","profiles","her","name","fullName","age","bday","height","class","defaultImage","me","playlist","artist","url","cover","compressImage","file","Promise","resolve","reader","FileReader","readAsDataURL","onload","event","img","src","target","result","canvas","document","createElement","MAX_WIDTH","scaleSize","width","ctx","getContext","drawImage","toDataURL","SetupRequiredScreen","className","children","size","CallOverlay","_ref","isActive","type","partnerName","onEnd","theme","concat","onClick","PhotoUploader","_ref2","currentImage","onImageUpload","fileInputRef","handleFileChange","e","files","imageUrl","URL","createObjectURL","localStorage","setItem","_fileInputRef$current","current","click","ref","onChange","accept","alt","onError","style","display","nextSibling","ModernGallery","_ref3","currentIndex","setCurrentIndex","isPlaying","setIsPlaying","touchStart","touchEnd","interval","setInterval","prev","length","clearInterval","handleSwipe","onTouchStart","targetTouches","clientX","onTouchMove","onTouchEnd","map","mem","idx","MusicPlayer","_ref4","identity","currentSong","setCurrentSong","partnerActivity","setPartnerActivity","songs","setSongs","showAddModal","setShowAddModal","newSongTitle","setNewSongTitle","newSongArtist","setNewSongArtist","newSongUrl","setNewSongUrl","progress","setProgress","duration","setDuration","audioRef","Audio","audio","pause","currentTime","q","unsubscribe","snapshot","userSongs","docs","_objectSpread","data","partnerId","exists","_data$lastUpdated","Date","now","lastUpdated","toMillis","songId","handleTimeUpdate","handleEnded","playNext","addEventListener","playPromise","play","undefined","catch","error","removeEventListener","playSong","song","findIndex","s","nextIndex","playPrev","prevIndex","handleSeek","newTime","parseFloat","value","syncWithPartner","find","handleAddLink","preventDefault","createdAt","Math","random","err","console","formatTime","time","isNaN","minutes","floor","seconds","min","max","fill","onSubmit","placeholder","required","IdentitySelector","_ref5","onSelect","profileImages","updateImage","key","profile","buttonStyle","stopPropagation","FloatingHeart","_ref6","removeHeart","left","animationDuration","timer","setTimeout","clearTimeout","RelationshipTimer","_ref7","setTime","days","hours","updateTime","diff","getTime","l","v","item","i","ProfileSection","_ref8","partnerStatus","MessageMenu","_ref9","isMe","onClose","onReply","onEdit","onDelete","ChatFeature","_ref0","user","startCall","messages","setMessages","newMessage","setNewMessage","replyingTo","setReplyingTo","editingMsg","setEditingMsg","menuOpenId","setMenuOpenId","uploading","setUploading","isConnected","setIsConnected","messagesEndRef","statusRef","unsubscribeStatus","msgs","_messagesEndRef$curre","scrollIntoView","behavior","handleSend","trim","msgToSend","replyText","image","senderId","senderName","timestamp","replyTo","sender","handleImageUpload","base64","handleDelete","msg","toLocaleTimeString","hour","minute","_fileInputRef$current2","App","setIdentity","setUser","activeTab","setActiveTab","hearts","setHearts","authError","setAuthError","setPartnerStatus","setProfileImages","calling","setCalling","callType","setCallType","initAuth","code","u","savedId","getItem","updateMyStatus","lastSeen","_data$lastSeen","handleIdentitySelect","handleLogout","removeItem","updateProfileImage","docChanges","forEach","change","heartColor","spawnMultipleHearts","sendRemoteHeart","spawnHeart","styleSheet","innerText","head","appendChild","removeChild","h","filter","heart","colorClass","c","myProfile","partnerProfile","TabButton","active","icon","_ref1","Icon","strokeWidth"],"sources":["F:/New folder/Downloads/NusVincore/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { Heart, Calendar, Image as ImageIcon, Send, Music, Scroll, MessageCircle, User, Ruler, GraduationCap, Cake, Camera, AlertTriangle, LogOut, Reply, Trash2, Edit2, X, Check, ArrowLeft, Phone, Video, PhoneIncoming, ChevronLeft, ChevronRight, Play, Pause, SkipBack, SkipForward, Disc, Headphones, Plus, Link as LinkIcon, ExternalLink } from 'lucide-react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\r\nimport { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, doc, updateDoc, deleteDoc, setDoc, query, orderBy } from 'firebase/firestore';\r\n\r\n// --- 1. FIREBASE CONFIGURATION ---\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDZAzllhZxQzNg63LBU44Ni_S83Z5R_6h8\",\r\n  authDomain: \"nusvincore.firebaseapp.com\",\r\n  projectId: \"nusvincore\",\r\n  storageBucket: \"nusvincore.firebasestorage.app\",\r\n  messagingSenderId: \"296006095052\",\r\n  appId: \"1:296006095052:web:b89ad939130d7e3a89b269\",\r\n  measurementId: \"G-2V4KD2Y2D6\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\n\r\n// --- 2. THEMES & CONFIG ---\r\nconst THEMES = {\r\n  tanvin: {\r\n    id: 'tanvin',\r\n    bgGradient: 'from-[#020617] via-[#0f172a] to-[#172554]', \r\n    text: 'text-blue-50',\r\n    textAccent: 'text-blue-300',\r\n    glassCard: 'bg-blue-900/20 backdrop-blur-2xl border border-blue-500/20 shadow-lg',\r\n    input: 'bg-blue-950/80 text-blue-100 border border-blue-500/20',\r\n    heartBtn: 'bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-400/30 text-blue-400 shadow-[0_0_15px_rgba(59,130,246,0.5)] backdrop-blur-md',\r\n    button: 'bg-blue-600 text-white shadow-md border border-blue-400/20',\r\n    navBar: 'bg-[#020617]/80 border-t border-blue-500/20',\r\n    navIcon: 'text-blue-100/80 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]',\r\n    chatBubbleMe: 'bg-blue-600 text-white shadow-md',\r\n    chatBubbleThem: 'bg-slate-800/80 text-blue-100 border border-white/5',\r\n    orb1: 'bg-blue-600/10', \r\n    orb2: 'bg-cyan-900/10'\r\n  },\r\n  nusra: {\r\n    id: 'nusra',\r\n    bgGradient: 'from-[#1a050d] via-[#2e0818] to-[#500724]',\r\n    text: 'text-pink-50',\r\n    textAccent: 'text-pink-300',\r\n    glassCard: 'bg-pink-900/20 backdrop-blur-2xl border border-pink-500/20 shadow-lg',\r\n    input: 'bg-pink-950/80 text-pink-100 border border-pink-500/20',\r\n    heartBtn: 'bg-gradient-to-br from-pink-500/20 to-pink-600/10 border border-pink-400/30 text-pink-400 shadow-[0_0_15px_rgba(236,72,153,0.5)] backdrop-blur-md',\r\n    button: 'bg-pink-600 text-white shadow-md border border-pink-400/20',\r\n    navBar: 'bg-[#1a050d]/80 border-t border-pink-500/20',\r\n    navIcon: 'text-pink-100/80 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]',\r\n    chatBubbleMe: 'bg-pink-600 text-white shadow-md',\r\n    chatBubbleThem: 'bg-gray-900/80 text-pink-100 border border-white/5',\r\n    orb1: 'bg-pink-900/10',\r\n    orb2: 'bg-purple-900/10'\r\n  }\r\n};\r\n\r\nconst CONFIG = {\r\n  startDate: \"2024-10-24T00:00:00\", \r\n  memories: [\r\n    { id: 1, title: \"First Date\", date: \"Jan 1, 2023\", color: \"bg-pink-600\" },\r\n    { id: 2, title: \"Our Trip\", date: \"Mar 15, 2023\", color: \"bg-purple-600\" },\r\n    { id: 3, title: \"Best Birthday\", date: \"June 20, 2023\", color: \"bg-fuchsia-600\" },\r\n    { id: 4, title: \"Lazy Sunday\", date: \"Aug 5, 2023\", color: \"bg-rose-600\" },\r\n    { id: 5, title: \"The Concert\", date: \"Oct 12, 2023\", color: \"bg-indigo-600\" },\r\n    { id: 6, title: \"New Year's Eve\", date: \"Dec 31, 2023\", color: \"bg-violet-600\" },\r\n  ],\r\n  profiles: {\r\n    her: { id: \"nusra\", name: \"Nusra\", fullName: \"Maisha Tabassum Nusra\", age: \"14\", bday: \"Apr 2\", height: \"5'2\", class: \"Class 8\", defaultImage: \"nusra.jpg\" },\r\n    me: { id: \"tanvin\", name: \"Tanvin\", fullName: \"Tanvin Waseef\", age: \"16\", bday: \"Oct 14\", height: \"5'9\", class: \"Class 9\", defaultImage: \"tanvin.jpg\" }\r\n  },\r\n  playlist: [\r\n    { id: \"1\", title: \"Perfect\", artist: \"Ed Sheeran\", url: \"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3\", cover: \"bg-blue-500\" },\r\n    { id: \"2\", title: \"Tum Hi Ho\", artist: \"Arijit Singh\", url: \"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3\", cover: \"bg-pink-500\" }\r\n  ]\r\n};\r\n\r\n// --- HELPERS ---\r\nconst compressImage = (file) => {\r\n  return new Promise((resolve) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = (event) => {\r\n      const img = new Image();\r\n      img.src = event.target.result;\r\n      img.onload = () => {\r\n        const canvas = document.createElement('canvas');\r\n        const MAX_WIDTH = 600;\r\n        const scaleSize = MAX_WIDTH / img.width;\r\n        canvas.width = MAX_WIDTH;\r\n        canvas.height = img.height * scaleSize;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n        resolve(canvas.toDataURL('image/jpeg', 0.7));\r\n      };\r\n    };\r\n  });\r\n};\r\n\r\n// --- COMPONENTS ---\r\n\r\nconst SetupRequiredScreen = () => (\r\n  <div className=\"flex flex-col items-center justify-center h-screen w-full max-w-[56.25vh] mx-auto bg-black text-white p-8 text-center aspect-[9/16]\">\r\n    <AlertTriangle size={48} className=\"text-yellow-500 mb-4\" />\r\n    <h2 className=\"text-xl font-bold mb-4\">One Last Step!</h2>\r\n    <p className=\"text-sm text-gray-300 mb-6\">Enable \"Anonymous Auth\" in Firebase Console.</p>\r\n  </div>\r\n);\r\n\r\nconst CallOverlay = ({ isActive, type, partnerName, onEnd, theme }) => {\r\n  if (!isActive) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-[100] bg-black/80 backdrop-blur-xl flex flex-col items-center justify-center animate-fade-in\">\r\n      <div className={`w-32 h-32 rounded-full ${theme.glassCard} flex items-center justify-center mb-8 animate-pulse ring-1 ring-white/20`}>\r\n        {type === 'video' ? <Video size={56} className={theme.text} /> : <Phone size={56} className={theme.text} />}\r\n      </div>\r\n      <h2 className={`text-3xl font-bold ${theme.text} mb-2 tracking-tight`}>{partnerName}</h2>\r\n      <p className={`${theme.text} opacity-60 mb-16 text-lg font-medium`}>{type === 'video' ? 'Video Calling...' : 'Calling...'}</p>\r\n      <button onClick={onEnd} className=\"w-20 h-20 rounded-full bg-red-500 flex items-center justify-center shadow-2xl active:scale-90 transition-transform hover:bg-red-600 border-4 border-black/20\">\r\n        <PhoneIncoming size={32} className=\"text-white rotate-[135deg]\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PhotoUploader = ({ currentImage, onImageUpload, id }) => {\r\n  const fileInputRef = useRef(null);\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const imageUrl = URL.createObjectURL(file);\r\n      onImageUpload(imageUrl);\r\n      localStorage.setItem(`love_capsule_photo_${id}`, imageUrl);\r\n    }\r\n  };\r\n  return (\r\n    <div onClick={() => fileInputRef.current?.click()} className=\"w-16 h-16 rounded-full overflow-hidden relative cursor-pointer group shrink-0 bg-white/10 border-2 border-white/20\">\r\n      <input type=\"file\" ref={fileInputRef} onChange={handleFileChange} className=\"hidden\" accept=\"image/*\" />\r\n      <img src={currentImage} alt=\"Profile\" className=\"w-full h-full object-cover object-center\" onError={(e) => { e.target.style.display='none'; e.target.nextSibling.style.display='flex'; }} />\r\n      <div className={`absolute inset-0 flex flex-col items-center justify-center bg-black/40 backdrop-blur-[2px] transition-opacity ${currentImage ? 'hidden' : 'flex'}`}>\r\n         <Camera size={16} className=\"text-white/80\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ModernGallery = ({ memories, theme }) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isPlaying, setIsPlaying] = useState(true);\r\n  const touchStart = useRef(0);\r\n  const touchEnd = useRef(0);\r\n  useEffect(() => {\r\n    let interval;\r\n    if (isPlaying) {\r\n      interval = setInterval(() => {\r\n        setCurrentIndex((prev) => (prev + 1) % memories.length);\r\n      }, 3000);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [isPlaying, memories.length]);\r\n  const handleSwipe = () => {\r\n    if (touchStart.current - touchEnd.current > 50) setCurrentIndex((prev) => (prev + 1) % memories.length);\r\n    if (touchStart.current - touchEnd.current < -50) setCurrentIndex((prev) => (prev - 1 + memories.length) % memories.length);\r\n  };\r\n  return (\r\n    <div className=\"flex flex-col gap-6 animate-fade-in\">\r\n      <div \r\n        className={`relative w-full aspect-[4/5] ${theme.glassCard} rounded-[2rem] overflow-hidden shadow-2xl transition-all duration-500 ring-1 ring-white/10`}\r\n        onTouchStart={(e) => touchStart.current = e.targetTouches[0].clientX}\r\n        onTouchMove={(e) => touchEnd.current = e.targetTouches[0].clientX}\r\n        onTouchEnd={handleSwipe}\r\n      >\r\n        <div className={`absolute inset-0 ${memories[currentIndex].color} flex items-center justify-center transition-colors duration-500`}>\r\n             <ImageIcon className=\"text-white/40 w-32 h-32\" />\r\n        </div>\r\n        <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent p-6 pt-20 backdrop-blur-[2px]\">\r\n          <h3 className=\"text-2xl font-bold text-white mb-1 tracking-wide\">{memories[currentIndex].title}</h3>\r\n          <p className={`text-sm ${theme.text} opacity-80 font-medium`}>{memories[currentIndex].date}</p>\r\n        </div>\r\n        <div className=\"absolute top-4 right-4 flex gap-2\">\r\n           <button onClick={() => setIsPlaying(!isPlaying)} className={`p-2 rounded-full bg-black/30 backdrop-blur-md text-white hover:bg-black/50 transition border border-white/10 active:scale-90`}>\r\n             {isPlaying ? <Pause size={16} /> : <Play size={16} />}\r\n           </button>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <h3 className={`text-xs font-bold ${theme.text} mb-3 px-2 opacity-70 uppercase tracking-wider`}>Timeline</h3>\r\n        <div className=\"flex gap-3 overflow-x-auto pb-4 scrollbar-hide px-1 snap-x\">\r\n          {memories.map((mem, idx) => (\r\n            <button \r\n              key={mem.id} \r\n              onClick={() => { setCurrentIndex(idx); setIsPlaying(false); }}\r\n              className={`relative flex-shrink-0 w-16 h-16 rounded-2xl overflow-hidden transition-all duration-300 snap-start border border-white/10 ${idx === currentIndex ? 'ring-2 ring-white scale-105 shadow-lg' : 'opacity-60 scale-95'}`}\r\n            >\r\n              <div className={`w-full h-full ${mem.color} flex items-center justify-center`}>\r\n                 <ImageIcon size={14} className=\"text-white/50\" />\r\n              </div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- MUSIC PLAYER COMPONENT ---\r\nconst MusicPlayer = ({ theme, identity, partnerName }) => {\r\n  const [currentSong, setCurrentSong] = useState(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [partnerActivity, setPartnerActivity] = useState(null);\r\n  const [songs, setSongs] = useState([...CONFIG.playlist]);\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [newSongTitle, setNewSongTitle] = useState(\"\");\r\n  const [newSongArtist, setNewSongArtist] = useState(\"\");\r\n  const [newSongUrl, setNewSongUrl] = useState(\"\");\r\n  const [progress, setProgress] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  \r\n  const audioRef = useRef(new Audio());\r\n\r\n  // 1. Cleanup on unmount\r\n  useEffect(() => {\r\n      const audio = audioRef.current;\r\n      return () => {\r\n          audio.pause();\r\n          audio.currentTime = 0;\r\n      };\r\n  }, []);\r\n\r\n  // 2. Fetch User Added Songs from Firestore\r\n  useEffect(() => {\r\n    const q = query(collection(db, 'user_songs'), orderBy('createdAt', 'desc'));\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const userSongs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setSongs([...CONFIG.playlist, ...userSongs]);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  // 3. Sync with Partner\r\n  useEffect(() => {\r\n    const partnerId = identity === 'tanvin' ? 'nusra' : 'tanvin';\r\n    const unsubscribe = onSnapshot(doc(db, 'music', partnerId), (doc) => {\r\n      if (doc.exists()) {\r\n        const data = doc.data();\r\n        if (data.isPlaying && Date.now() - data.lastUpdated?.toMillis() < 60000) {\r\n           setPartnerActivity(data);\r\n        } else {\r\n           setPartnerActivity(null);\r\n        }\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, [identity]);\r\n\r\n  // 4. Update My Status\r\n  useEffect(() => {\r\n    if (currentSong) {\r\n        setDoc(doc(db, 'music', identity), {\r\n            songId: currentSong.id,\r\n            title: currentSong.title,\r\n            artist: currentSong.artist,\r\n            isPlaying: isPlaying,\r\n            lastUpdated: serverTimestamp()\r\n        });\r\n    } else {\r\n        // Explicitly set playing to false if no song loaded\r\n         setDoc(doc(db, 'music', identity), {\r\n            isPlaying: false,\r\n            lastUpdated: serverTimestamp()\r\n        });\r\n    }\r\n  }, [currentSong, isPlaying, identity]);\r\n\r\n  // 5. Audio Control\r\n  useEffect(() => {\r\n    const audio = audioRef.current;\r\n    \r\n    const handleTimeUpdate = () => {\r\n        setDuration(audio.duration || 0);\r\n        setProgress(audio.currentTime);\r\n    };\r\n    \r\n    const handleEnded = () => {\r\n        playNext();\r\n    };\r\n\r\n    audio.addEventListener('timeupdate', handleTimeUpdate);\r\n    audio.addEventListener('ended', handleEnded);\r\n\r\n    if (currentSong) {\r\n        if (audio.src !== currentSong.url) {\r\n            audio.src = currentSong.url;\r\n        }\r\n        if (isPlaying) {\r\n            const playPromise = audio.play();\r\n            if (playPromise !== undefined) {\r\n                playPromise.catch(error => {\r\n                    if (error.name !== 'AbortError') setIsPlaying(false);\r\n                });\r\n            }\r\n        } else {\r\n            audio.pause();\r\n        }\r\n    } else {\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n    }\r\n\r\n    return () => {\r\n        audio.removeEventListener('timeupdate', handleTimeUpdate);\r\n        audio.removeEventListener('ended', handleEnded);\r\n    };\r\n  }, [currentSong, isPlaying]);\r\n\r\n  const playSong = (song) => {\r\n    if (currentSong?.id === song.id) {\r\n        setIsPlaying(!isPlaying);\r\n    } else {\r\n        setCurrentSong(song);\r\n        setIsPlaying(true);\r\n    }\r\n  };\r\n\r\n  const playNext = () => {\r\n      if(!currentSong) return;\r\n      const currentIndex = songs.findIndex(s => s.id === currentSong.id);\r\n      const nextIndex = (currentIndex + 1) % songs.length;\r\n      playSong(songs[nextIndex]);\r\n  };\r\n\r\n  const playPrev = () => {\r\n      if(!currentSong) return;\r\n      const currentIndex = songs.findIndex(s => s.id === currentSong.id);\r\n      const prevIndex = (currentIndex - 1 + songs.length) % songs.length;\r\n      playSong(songs[prevIndex]);\r\n  };\r\n\r\n  const handleSeek = (e) => {\r\n      const newTime = parseFloat(e.target.value);\r\n      audioRef.current.currentTime = newTime;\r\n      setProgress(newTime);\r\n  };\r\n\r\n  const syncWithPartner = () => {\r\n      if (partnerActivity) {\r\n          const song = songs.find(s => s.id === partnerActivity.songId);\r\n          if (song) {\r\n              setCurrentSong(song);\r\n              setIsPlaying(true);\r\n          }\r\n      }\r\n  };\r\n\r\n  const handleAddLink = async (e) => {\r\n      e.preventDefault();\r\n      if (!newSongTitle || !newSongArtist || !newSongUrl) return;\r\n      try {\r\n          await addDoc(collection(db, 'user_songs'), {\r\n              title: newSongTitle,\r\n              artist: newSongArtist,\r\n              url: newSongUrl,\r\n              createdAt: serverTimestamp(),\r\n              cover: `bg-${Math.random() > 0.5 ? 'blue' : 'pink'}-500`\r\n          });\r\n          setNewSongTitle(\"\"); setNewSongArtist(\"\"); setNewSongUrl(\"\"); setShowAddModal(false);\r\n      } catch (err) { console.error(\"Add song failed\", err); }\r\n  };\r\n\r\n  const formatTime = (time) => {\r\n      if (isNaN(time)) return \"0:00\";\r\n      const minutes = Math.floor(time / 60);\r\n      const seconds = Math.floor(time % 60);\r\n      return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full pb-24 animate-fade-in relative\">\r\n        {partnerActivity && partnerActivity.isPlaying && (\r\n            <div className={`mx-4 mt-4 mb-2 p-3 rounded-2xl bg-gradient-to-r from-pink-500/20 to-purple-500/20 border border-white/10 flex items-center justify-between backdrop-blur-md animate-pulse`}>\r\n                <div className=\"flex items-center gap-3 overflow-hidden\">\r\n                    <Headphones size={20} className=\"text-pink-300 shrink-0\" />\r\n                    <div className=\"truncate\">\r\n                        <p className=\"text-xs text-white/90 font-bold truncate\">{partnerName} is listening to...</p>\r\n                        <p className=\"text-[10px] text-white/60 truncate\">{partnerActivity.title}</p>\r\n                    </div>\r\n                </div>\r\n                <button onClick={syncWithPartner} className=\"bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-full text-[10px] font-bold text-white border border-white/10 transition-colors shrink-0\">\r\n                    Listen Together\r\n                </button>\r\n            </div>\r\n        )}\r\n\r\n        <div className={`mx-6 my-6 aspect-square ${theme.glassCard} rounded-[2.5rem] flex flex-col items-center justify-center relative overflow-hidden shadow-2xl`}>\r\n            {currentSong ? (\r\n                <>\r\n                    <div className={`absolute inset-0 ${currentSong.cover} opacity-20 blur-2xl`}></div>\r\n                    <div className={`w-40 h-40 rounded-full border-4 border-white/10 flex items-center justify-center shadow-2xl ${isPlaying ? 'animate-[spin_10s_linear_infinite]' : ''}`}>\r\n                        <Disc size={64} className=\"text-white/50\" />\r\n                    </div>\r\n                    <div className=\"mt-8 text-center z-10 px-6\">\r\n                        <h2 className=\"text-2xl font-bold text-white mb-1 truncate w-full\">{currentSong.title}</h2>\r\n                        <p className={`text-sm ${theme.text} opacity-70`}>{currentSong.artist}</p>\r\n                    </div>\r\n                </>\r\n            ) : (\r\n                <div className=\"flex flex-col items-center text-white/40\">\r\n                    <Music size={48} className=\"mb-4\" />\r\n                    <p className=\"text-sm\">Select a song to play</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n\r\n        <div className=\"px-8 flex flex-col gap-4 mb-6\">\r\n            {/* Interactive Slider */}\r\n            <div className=\"flex flex-col gap-2\">\r\n                <input \r\n                    type=\"range\" \r\n                    min=\"0\" \r\n                    max={duration || 0} \r\n                    value={progress} \r\n                    onChange={handleSeek}\r\n                    className=\"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-white\"\r\n                />\r\n                <div className=\"flex justify-between text-[10px] text-white/50 font-medium\">\r\n                    <span>{formatTime(progress)}</span>\r\n                    <span>{formatTime(duration)}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between px-4 mt-2\">\r\n                <button onClick={playPrev} className={`text-white/60 hover:text-white transition active:scale-90`}><SkipBack size={32} /></button>\r\n                <button \r\n                    onClick={() => setIsPlaying(!isPlaying)}\r\n                    className={`w-16 h-16 rounded-full flex items-center justify-center bg-white text-black shadow-xl active:scale-95 transition-all hover:scale-105`}\r\n                >\r\n                    {isPlaying ? <Pause size={28} fill=\"currentColor\" /> : <Play size={28} fill=\"currentColor\" className=\"ml-1\" />}\r\n                </button>\r\n                <button onClick={playNext} className={`text-white/60 hover:text-white transition active:scale-90`}><SkipForward size={32} /></button>\r\n            </div>\r\n        </div>\r\n\r\n        <div className=\"px-6 flex items-center justify-between mb-3\">\r\n            <h3 className={`text-xs font-bold ${theme.text} uppercase tracking-wider opacity-60`}>Library</h3>\r\n            <button onClick={() => setShowAddModal(true)} className=\"p-2 rounded-full bg-white/10 hover:bg-white/20 transition\"><Plus size={16} className=\"text-white\" /></button>\r\n        </div>\r\n        \r\n        <div className=\"px-6 flex flex-col gap-3 pb-4\">\r\n            {songs.map((song) => (\r\n                <button key={song.id} onClick={() => playSong(song)} className={`flex items-center gap-4 p-3 rounded-2xl transition-all ${currentSong?.id === song.id ? 'bg-white/10 border border-white/10' : 'hover:bg-white/5 border border-transparent'}`}>\r\n                    <div className={`w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center shrink-0`}>\r\n                        <Music size={16} className=\"text-white/50\" />\r\n                    </div>\r\n                    <div className=\"text-left flex-1 min-w-0\">\r\n                        <h4 className={`text-sm font-bold ${currentSong?.id === song.id ? 'text-white' : theme.text} truncate`}>{song.title}</h4>\r\n                        <p className=\"text-[10px] text-white/40 truncate\">{song.artist}</p>\r\n                    </div>\r\n                    {currentSong?.id === song.id && isPlaying && <div className=\"w-2 h-2 rounded-full bg-green-400 animate-pulse\"></div>}\r\n                </button>\r\n            ))}\r\n        </div>\r\n\r\n        {showAddModal && (\r\n            <div className=\"absolute inset-0 z-50 bg-black/80 backdrop-blur-md flex items-center justify-center p-6 animate-fade-in\">\r\n                <div className={`${theme.glassCard} p-6 rounded-[2rem] w-full max-w-sm`}>\r\n                    <h3 className=\"text-xl font-bold text-white mb-4\">Add Music Link</h3>\r\n                    <form onSubmit={handleAddLink} className=\"flex flex-col gap-4\">\r\n                        <input type=\"text\" placeholder=\"Song Title\" value={newSongTitle} onChange={e=>setNewSongTitle(e.target.value)} className={`p-3 rounded-xl ${theme.input} text-sm bg-black/40 outline-none`} required />\r\n                        <input type=\"text\" placeholder=\"Artist Name\" value={newSongArtist} onChange={e=>setNewSongArtist(e.target.value)} className={`p-3 rounded-xl ${theme.input} text-sm bg-black/40 outline-none`} required />\r\n                        <input type=\"url\" placeholder=\"MP3 URL (Direct Link)\" value={newSongUrl} onChange={e=>setNewSongUrl(e.target.value)} className={`p-3 rounded-xl ${theme.input} text-sm bg-black/40 outline-none`} required />\r\n                        \r\n                        <div className=\"flex gap-3 mt-2\">\r\n                            <button type=\"button\" onClick={() => setShowAddModal(false)} className=\"flex-1 p-3 rounded-xl bg-white/5 text-white/70 text-sm hover:bg-white/10 transition\">Cancel</button>\r\n                            <button type=\"submit\" className={`flex-1 p-3 rounded-xl ${theme.button} text-sm flex items-center justify-center gap-2`}>Add Song</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst IdentitySelector = ({ onSelect, profileImages, updateImage }) => {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-screen w-full max-w-[56.25vh] mx-auto bg-gradient-to-b from-[#020617] via-[#1e1b4b] to-[#312e81] text-white p-6 relative overflow-hidden aspect-[9/16]\">\r\n      <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-transparent via-black/30 to-black/80 pointer-events-none\"></div>\r\n      <h1 className=\"text-3xl font-bold mb-10 z-10 text-center text-white drop-shadow-lg tracking-tight\">Who are you?</h1>\r\n      <div className=\"flex flex-col gap-6 w-full max-w-xs z-10\">\r\n        {['me', 'her'].map((key) => {\r\n          const profile = CONFIG.profiles[key];\r\n          const theme = THEMES[profile.id];\r\n          const buttonStyle = profile.id === 'tanvin' ? 'bg-blue-900/20 border-blue-500/20 hover:bg-blue-900/40' : 'bg-pink-900/20 border-pink-500/20 hover:bg-pink-900/40';\r\n          return (\r\n            <div key={key} className={`${buttonStyle} backdrop-blur-xl border p-4 rounded-[2rem] flex items-center gap-5 transition-all duration-300 active:scale-95 shadow-[0_8px_32px_rgba(0,0,0,0.3)] group`}>\r\n              <div onClick={(e) => e.stopPropagation()}>\r\n                <PhotoUploader id={profile.id} currentImage={profileImages[profile.id]} onImageUpload={(url) => updateImage(profile.id, url)} />\r\n              </div>\r\n              <button onClick={() => onSelect(profile.id)} className=\"flex-1 text-left h-full flex flex-col justify-center\">\r\n                <h3 className={`font-bold text-2xl ${theme.text} group-hover:text-white transition-colors`}>{profile.name}</h3>\r\n                <p className={`text-[11px] ${theme.text} opacity-60 tracking-widest uppercase`}>Tap to Enter</p>\r\n              </button>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst FloatingHeart = ({ id, color, removeHeart }) => {\r\n  const [style] = useState(() => ({ left: `${Math.random() * 80 + 10}%`, animationDuration: `${3 + Math.random() * 2}s` }));\r\n  useEffect(() => { const timer = setTimeout(() => removeHeart(id), 4000); return () => clearTimeout(timer); }, [id, removeHeart]);\r\n  return (\r\n    <div className={`absolute bottom-0 ${color} pointer-events-none animate-float z-50`} style={style}>\r\n      <Heart fill=\"currentColor\" size={24 + Math.random() * 24} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RelationshipTimer = ({ theme }) => {\r\n  const [time, setTime] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });\r\n  useEffect(() => {\r\n    const updateTime = () => {\r\n      const diff = new Date().getTime() - new Date(CONFIG.startDate).getTime();\r\n      setTime({\r\n        days: Math.floor(diff / (1000 * 60 * 60 * 24)),\r\n        hours: Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),\r\n        minutes: Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)),\r\n        seconds: Math.floor((diff % (1000 * 60)) / 1000)\r\n      });\r\n    };\r\n    const timer = setInterval(updateTime, 1000);\r\n    updateTime(); return () => clearInterval(timer);\r\n  }, []);\r\n  return (\r\n    <div className={`${theme.glassCard} rounded-[2rem] p-6 mb-6 hover:shadow-[0_0_30px_rgba(255,255,255,0.1)] transition-shadow duration-500`}>\r\n      <h2 className={`text-sm font-bold ${theme.text} mb-4 flex items-center gap-2 pl-1 opacity-90 tracking-widest uppercase`}>\r\n        <Calendar className={theme.textAccent} size={14} /> Time Together\r\n      </h2>\r\n      <div className=\"grid grid-cols-4 gap-3 text-center\">\r\n        {[{l:'Days',v:time.days}, {l:'Hrs',v:time.hours}, {l:'Mins',v:time.minutes}, {l:'Secs',v:time.seconds}].map((item, i) => (\r\n          <div key={i} className=\"flex flex-col bg-white/5 rounded-2xl py-3 backdrop-blur-sm border border-white/10 shadow-inner\">\r\n            <span className={`text-xl font-bold ${theme.textAccent} font-mono drop-shadow-md`}>{item.v}</span>\r\n            <span className={`text-[8px] uppercase tracking-widest ${theme.text} opacity-50 mt-1`}>{item.l}</span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ProfileSection = ({ profileImages, updateImage, theme, partnerStatus }) => {\r\n  return (\r\n    <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n      {[CONFIG.profiles.me, CONFIG.profiles.her].map((profile, i) => {\r\n        return (\r\n          <div key={i} className={`${theme.glassCard} rounded-[2rem] p-5 flex flex-col items-center text-center relative overflow-hidden hover:bg-white/5 transition-colors duration-300`}>\r\n             <div className=\"mb-3 relative\">\r\n               <PhotoUploader id={profile.id} currentImage={profileImages[profile.id]} onImageUpload={(url) => updateImage(profile.id, url)} />\r\n               {((profile.id === 'nusra' && theme.id === 'tanvin') || (profile.id === 'tanvin' && theme.id === 'nusra')) && (\r\n                 <div className={`absolute bottom-0 right-0 w-4 h-4 rounded-full border-[3px] border-[#0f172a] ${partnerStatus === 'online' ? 'bg-green-400 shadow-[0_0_10px_#22c55e]' : 'bg-gray-500'}`}></div>\r\n               )}\r\n             </div>\r\n             <h3 className={`${theme.text} font-bold text-lg mb-1 tracking-tight`}>{profile.name}</h3>\r\n             <div className={`flex items-center gap-1.5 text-[10px] ${theme.text} opacity-70 bg-white/5 border border-white/10 px-3 py-1 rounded-full shadow-sm`}>\r\n                <Cake size={10}/> <span>{profile.bday}</span>\r\n             </div>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst MessageMenu = ({ isMe, onClose, onReply, onEdit, onDelete, theme }) => (\r\n  <div className=\"absolute bottom-full mb-2 right-0 bg-black/80 backdrop-blur-xl border border-white/10 rounded-[1.5rem] shadow-2xl p-2 flex flex-col gap-1 min-w-[120px] z-50 overflow-hidden animate-fade-in origin-bottom-right\">\r\n    <button onClick={(e) => { e.stopPropagation(); onReply(); }} className={`flex items-center gap-3 px-4 py-3 text-[12px] font-medium ${theme.text} hover:bg-white/10 transition-all rounded-xl active:scale-95`}> \r\n      <Reply size={16} /> Reply \r\n    </button>\r\n    {isMe && (\r\n      <>\r\n        <button onClick={(e) => { e.stopPropagation(); onEdit(); }} className={`flex items-center gap-3 px-4 py-3 text-[12px] font-medium ${theme.text} hover:bg-white/10 transition-all rounded-xl active:scale-95`}> \r\n          <Edit2 size={16} /> Edit \r\n        </button>\r\n        <button onClick={(e) => { e.stopPropagation(); onDelete(); }} className=\"flex items-center gap-3 px-4 py-3 text-[12px] font-medium text-red-400 hover:bg-red-500/10 transition-all rounded-xl active:scale-95\"> \r\n          <Trash2 size={16} /> Unsend \r\n        </button>\r\n      </>\r\n    )}\r\n    <div className=\"h-px bg-white/10 my-1 mx-2\"></div>\r\n    <button onClick={(e) => { e.stopPropagation(); onClose(); }} className={`text-[11px] py-2 ${theme.text} opacity-50 hover:opacity-100 transition-opacity text-center`}>Cancel</button>\r\n  </div>\r\n);\r\n\r\nconst ChatFeature = ({ identity, user, theme, partnerStatus, startCall }) => { \r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [replyingTo, setReplyingTo] = useState(null);\r\n  const [editingMsg, setEditingMsg] = useState(null);\r\n  const [menuOpenId, setMenuOpenId] = useState(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    const statusRef = doc(db, 'status', 'connection-test');\r\n    const unsubscribeStatus = onSnapshot(statusRef, () => setIsConnected(true), () => setIsConnected(false));\r\n    const q = query(collection(db, 'messages'), orderBy('timestamp', 'asc'));\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const msgs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setMessages(msgs);\r\n      setTimeout(() => messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" }), 100);\r\n    });\r\n    return () => { unsubscribe(); unsubscribeStatus(); };\r\n  }, [user]);\r\n\r\n  const handleSend = async (e) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim() && !uploading) return;\r\n    const msgToSend = newMessage;\r\n    setNewMessage(\"\"); \r\n    if (editingMsg) {\r\n      try { await updateDoc(doc(db, 'messages', editingMsg.id), { text: msgToSend }); setEditingMsg(null); } catch(e) {}\r\n      return;\r\n    }\r\n    try {\r\n      const replyText = replyingTo ? (replyingTo.text || (replyingTo.image ? \"Photo\" : \"Message\")) : null;\r\n      await addDoc(collection(db, 'messages'), {\r\n        text: msgToSend,\r\n        senderId: identity,\r\n        senderName: CONFIG.profiles[identity === 'tanvin' ? 'me' : 'her'].name,\r\n        timestamp: Date.now(),\r\n        replyTo: replyingTo ? { id: replyingTo.id, text: replyText || \"\", sender: replyingTo.senderName } : null\r\n      });\r\n      setReplyingTo(null);\r\n    } catch (error) {}\r\n  };\r\n\r\n  const handleImageUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    setUploading(true);\r\n    try {\r\n      const base64 = await compressImage(file);\r\n      await addDoc(collection(db, 'messages'), { image: base64, text: \"\", senderId: identity, senderName: CONFIG.profiles[identity === 'tanvin' ? 'me' : 'her'].name, timestamp: Date.now() });\r\n    } catch (err) {}\r\n    setUploading(false);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try { await deleteDoc(doc(db, 'messages', id)); setMenuOpenId(null); } catch(e) {}\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full relative\">\r\n      {!isConnected && <div className=\"absolute top-0 left-0 right-0 bg-red-500/80 text-white text-[10px] text-center py-1 z-50 backdrop-blur-sm\">Connecting...</div>}\r\n      <div className={`flex-1 p-4 overflow-y-auto flex flex-col gap-4 scrollbar-hide`}>\r\n        {messages.length === 0 && <div className={`flex-1 flex items-center justify-center ${theme.text} opacity-30 text-sm font-medium italic`}>Start a conversation...</div>}\r\n        {messages.map((msg) => {\r\n          const isMe = msg.senderId === identity;\r\n          return (\r\n            <div key={msg.id} className={`flex flex-col ${isMe ? 'items-end self-end' : 'items-start self-start'} relative group max-w-[85%] animate-fade-in-up`}>\r\n              {msg.replyTo && (\r\n                <div className={`text-[10px] mb-1 px-3 py-1.5 rounded-2xl bg-white/10 text-white/70 truncate w-full border-l-2 border-white/30 backdrop-blur-sm`}>Replying to {msg.replyTo.sender}: {msg.replyTo.text}</div>\r\n              )}\r\n              <div onClick={() => setMenuOpenId(menuOpenId === msg.id ? null : msg.id)} className={`px-4 py-3 rounded-[1.5rem] text-sm cursor-pointer transition-all duration-200 active:scale-95 ${isMe ? theme.chatBubbleMe : theme.chatBubbleThem} ${isMe ? 'rounded-br-sm' : 'rounded-bl-sm'} w-fit break-all whitespace-pre-wrap shadow-lg`}>\r\n                {msg.image ? <img src={msg.image} alt=\"Shared\" className=\"rounded-xl max-w-full max-h-[200px] object-cover\" /> : <p className=\"leading-relaxed tracking-wide\">{msg.text}</p>}\r\n              </div>\r\n              {menuOpenId === msg.id && <MessageMenu isMe={isMe} onClose={() => setMenuOpenId(null)} onReply={() => { setReplyingTo(msg); setMenuOpenId(null); }} onEdit={() => { setEditingMsg(msg); setNewMessage(msg.text); setMenuOpenId(null); }} onDelete={() => handleDelete(msg.id)} theme={theme} />}\r\n              <span className={`text-[9px] ${theme.text} opacity-40 mt-1 px-2 font-medium tracking-wider`}>{new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\r\n            </div>\r\n          );\r\n        })}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n      {replyingTo && <div className=\"flex items-center justify-between bg-black/40 backdrop-blur-md border-t border-white/10 p-3 px-4 text-xs text-white/80 mx-3 rounded-t-2xl\"><div className=\"truncate opacity-90\">Replying to <b>{replyingTo.senderName}</b></div><button onClick={() => setReplyingTo(null)}><X size={14} /></button></div>}\r\n      <form onSubmit={handleSend} className={`flex gap-3 items-center p-2.5 m-3 rounded-[2.5rem] ${theme.input} shadow-[0_8px_32px_rgba(0,0,0,0.3)] relative z-20 backdrop-blur-xl border border-white/10`}>\r\n        <input type=\"file\" ref={fileInputRef} onChange={handleImageUpload} className=\"hidden\" accept=\"image/*\" />\r\n        <button type=\"button\" onClick={() => fileInputRef.current?.click()} className={`p-3 rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-all active:scale-90 ${uploading ? 'animate-pulse' : ''}`}><Camera size={20} /></button>\r\n        <input type=\"text\" value={newMessage} onChange={(e) => setNewMessage(e.target.value)} placeholder={editingMsg ? \"Edit message...\" : \"Type a message...\"} className=\"flex-1 bg-transparent text-sm focus:outline-none text-white/90 placeholder-white/40 min-w-0 px-2 font-medium\" />\r\n        {editingMsg && <button type=\"button\" onClick={() => { setEditingMsg(null); setNewMessage(\"\"); }} className=\"p-2 text-white/50 hover:text-white\"><X size={18} /></button>}\r\n        <button type=\"submit\" className={`p-3 rounded-full ${theme.button} shadow-lg shrink-0 active:scale-90 transition-all hover:brightness-110`}><Check size={20} className={editingMsg ? \"\" : \"hidden\"} /><Send size={20} className={!editingMsg ? \"\" : \"hidden\"} /></button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function App() {\r\n  const [identity, setIdentity] = useState(null); \r\n  const [user, setUser] = useState(null);\r\n  const [activeTab, setActiveTab] = useState('home');\r\n  const [hearts, setHearts] = useState([]);\r\n  const [authError, setAuthError] = useState(false);\r\n  const [partnerStatus, setPartnerStatus] = useState('offline'); \r\n  const [profileImages, setProfileImages] = useState({ tanvin: CONFIG.profiles.me.defaultImage, nusra: CONFIG.profiles.her.defaultImage });\r\n  const [calling, setCalling] = useState(false);\r\n  const [callType, setCallType] = useState('audio');\r\n  \r\n  useEffect(() => { const initAuth = async () => { try { await signInAnonymously(auth); } catch (error) { if (error.code === 'auth/configuration-not-found') setAuthError(true); } }; initAuth(); return onAuthStateChanged(auth, (u) => setUser(u)); }, []);\r\n  useEffect(() => { const savedId = localStorage.getItem('love_capsule_identity'); if (savedId) setIdentity(savedId); setProfileImages(prev => ({ tanvin: localStorage.getItem('love_capsule_photo_tanvin') || prev.tanvin, nusra: localStorage.getItem('love_capsule_photo_nusra') || prev.nusra })); }, []);\r\n  useEffect(() => { if (!identity || !user) return; const updateMyStatus = async () => { try { await setDoc(doc(db, 'status', identity), { lastSeen: serverTimestamp() }); } catch (e) {} }; updateMyStatus(); const interval = setInterval(updateMyStatus, 10000); const partnerId = identity === 'tanvin' ? 'nusra' : 'tanvin'; const unsubscribe = onSnapshot(doc(db, 'status', partnerId), (doc) => { if (doc.exists()) { const data = doc.data(); const lastSeen = data.lastSeen?.toMillis ? data.lastSeen.toMillis() : 0; setPartnerStatus(Date.now() - lastSeen < 15000 ? 'online' : 'offline'); } }); return () => { clearInterval(interval); unsubscribe(); }; }, [identity, user]);\r\n  const handleIdentitySelect = (id) => { setIdentity(id); localStorage.setItem('love_capsule_identity', id); };\r\n  const handleLogout = () => { setIdentity(null); localStorage.removeItem('love_capsule_identity'); };\r\n  const updateProfileImage = (id, url) => { setProfileImages(prev => ({ ...prev, [id]: url })); };\r\n  useEffect(() => { if (!user || !identity) return; const unsubscribe = onSnapshot(collection(db, 'signals'), (snapshot) => { snapshot.docChanges().forEach((change) => { if (change.type === \"added\") { const data = change.doc.data(); if (data.timestamp > Date.now() - 5000 && data.senderId !== identity) { const heartColor = data.senderId === 'tanvin' ? 'text-blue-500' : 'text-pink-500'; spawnMultipleHearts(heartColor); } } }); }); return () => unsubscribe(); }, [user, identity]);\r\n  const sendRemoteHeart = async () => { const theme = THEMES[identity]; spawnHeart(theme.heartColor); if (!user || !identity) return; try { await addDoc(collection(db, 'signals'), { type: 'heart', senderId: identity, timestamp: Date.now() }); } catch (e) {} };\r\n  const startCall = (type) => { setCallType(type); setCalling(true); };\r\n  useEffect(() => { const styleSheet = document.createElement(\"style\"); styleSheet.innerText = ` @keyframes float { 0% { transform: translateY(0) scale(1); opacity: 0; } 10% { opacity: 0.8; } 100% { transform: translateY(-100vh) scale(1.2); opacity: 0; } } .animate-float { animation-name: float; animation-timing-function: ease-in; } .scrollbar-hide::-webkit-scrollbar { display: none; } .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; } `; document.head.appendChild(styleSheet); return () => document.head.removeChild(styleSheet); }, []);\r\n  const removeHeart = useCallback((id) => { setHearts(h => h.filter(heart => heart.id !== id)); }, []);\r\n  const spawnHeart = useCallback((colorClass) => { setHearts(h => [...h, { id: `${Date.now()}-${Math.random()}`, color: colorClass }]); }, []);\r\n  const spawnMultipleHearts = useCallback((color) => { let c=0; const i = setInterval(() => { spawnHeart(color); c++; if(c>8) clearInterval(i); }, 200); }, [spawnHeart]);\r\n\r\n  if (authError) return <SetupRequiredScreen />;\r\n  if (!identity) return <IdentitySelector onSelect={handleIdentitySelect} profileImages={profileImages} updateImage={updateProfileImage} />;\r\n  const theme = THEMES[identity];\r\n  const myProfile = CONFIG.profiles[identity === 'tanvin' ? 'me' : 'her'];\r\n  const partnerProfile = CONFIG.profiles[identity === 'tanvin' ? 'her' : 'me'];\r\n\r\n  return (\r\n    <div className={`h-screen w-full max-w-[56.25vh] mx-auto bg-gradient-to-b ${theme.bgGradient} flex flex-col relative overflow-hidden shadow-2xl font-sans border-x-0 aspect-[9/16]`}>\r\n      {/* STABLE Background - No Animation */}\r\n      <div className={`fixed top-[-10%] left-[-10%] w-[600px] h-[600px] ${theme.orb1} rounded-full blur-[150px] pointer-events-none`}></div>\r\n      <div className={`fixed bottom-[-10%] right-[-10%] w-[600px] h-[600px] ${theme.orb2} rounded-full blur-[150px] pointer-events-none`}></div>\r\n\r\n      <CallOverlay isActive={calling} type={callType} partnerName={partnerProfile.name} onEnd={() => setCalling(false)} theme={theme} />\r\n\r\n      <header className=\"px-5 py-4 z-10 flex justify-between items-center bg-transparent relative\">\r\n        {activeTab === 'messages' ? (\r\n          <div className=\"flex items-center gap-3 w-full animate-fade-in\">\r\n            <button onClick={() => setActiveTab('home')} className={`p-2.5 rounded-full ${theme.glassCard} ${theme.text} hover:bg-white/10 transition-all active:scale-90 shadow-lg`}><ArrowLeft size={20} /></button>\r\n            <div className={`w-10 h-10 rounded-full shadow-[0_0_15px_rgba(255,255,255,0.1)] overflow-hidden border ${theme.id === 'tanvin' ? 'border-pink-400/30' : 'border-blue-400/30'}`}>\r\n               <img src={profileImages[partnerProfile.id]} className=\"w-full h-full object-cover\" onError={(e)=>e.target.style.display='none'} />\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h1 className={`text-lg font-bold ${theme.text} drop-shadow-md tracking-wide`}>{partnerProfile.name}</h1>\r\n              <div className=\"flex items-center gap-1.5\">\r\n                <div className={`w-2 h-2 rounded-full ${partnerStatus === 'online' ? 'bg-green-400 shadow-[0_0_10px_#22c55e]' : 'bg-gray-500'}`}></div>\r\n                <p className={`text-[10px] ${theme.text} opacity-60 tracking-wide uppercase font-medium`}>{partnerStatus === 'online' ? 'Online' : 'Offline'}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n               <button onClick={() => startCall('audio')} className={`p-2.5 rounded-full ${theme.glassCard} ${theme.text} hover:bg-white/10 transition-all active:scale-90 shadow-lg`}><Phone size={18} /></button>\r\n               <button onClick={() => startCall('video')} className={`p-2.5 rounded-full ${theme.glassCard} ${theme.text} hover:bg-white/10 transition-all active:scale-90 shadow-lg`}><Video size={18} /></button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex items-center justify-between w-full animate-fade-in\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className={`w-11 h-11 rounded-full shadow-[0_0_20px_rgba(255,255,255,0.1)] overflow-hidden border-2 ${theme.id === 'tanvin' ? 'border-blue-400/30' : 'border-pink-400/30'}`}>\r\n                 <img src={profileImages[myProfile.id]} className=\"w-full h-full object-cover\" onError={(e)=>e.target.style.display='none'} />\r\n              </div>\r\n              <div>\r\n                <h1 className={`text-xl font-bold ${theme.text} drop-shadow-lg tracking-tight`}>Hi, {myProfile.name}</h1>\r\n                <div className=\"flex items-center gap-1.5\">\r\n                  <div className={`w-2 h-2 rounded-full ${partnerStatus === 'online' ? 'bg-green-400 shadow-[0_0_10px_#22c55e]' : 'bg-gray-500'}`}></div>\r\n                  <p className={`text-[10px] ${theme.text} opacity-60 tracking-wide uppercase font-bold`}>{partnerStatus === 'online' ? 'Online' : 'Offline'}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <button onClick={handleLogout} className={`w-10 h-10 rounded-full flex items-center justify-center ${theme.glassCard} hover:bg-white/10 transition-all active:scale-90 shadow-lg`}><LogOut size={18} className={theme.text} /></button>\r\n              <button onClick={sendRemoteHeart} className={`w-10 h-10 rounded-full flex items-center justify-center ${theme.heartBtn} transition-all active:scale-90 hover:brightness-110`}><Heart fill=\"currentColor\" size={18} /></button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </header>\r\n\r\n      <main className={`flex-1 px-4 overflow-y-auto z-10 scrollbar-hide ${activeTab === 'messages' ? 'pb-0 px-0' : 'pb-28'}`}>\r\n        {activeTab === 'home' && (\r\n          <div className=\"animate-fade-in pt-2\">\r\n            <ProfileSection profileImages={profileImages} updateImage={updateProfileImage} theme={theme} partnerStatus={partnerStatus} />\r\n            <RelationshipTimer theme={theme} />\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'gallery' && <div className=\"animate-fade-in pt-2\"><ModernGallery memories={CONFIG.memories} theme={theme} /></div>}\r\n\r\n        {activeTab === 'music' && <MusicPlayer theme={theme} identity={identity} partnerName={partnerProfile.name} />}\r\n\r\n        {activeTab === 'messages' && <ChatFeature identity={identity} user={user} theme={theme} startCall={startCall} />}\r\n      </main>\r\n\r\n      {hearts.map(h => <FloatingHeart key={h.id} id={h.id} color={h.color} removeHeart={removeHeart} />)}\r\n\r\n      {activeTab !== 'messages' && (\r\n        <nav className={`absolute bottom-6 left-6 right-6 h-14 rounded-full ${theme.navBar} backdrop-blur-2xl flex justify-between items-center px-8 shadow-[0_10px_40px_rgba(0,0,0,0.6)] z-20 border border-white/10`}>\r\n          <TabButton active={activeTab === 'home'} onClick={() => setActiveTab('home')} icon={Heart} theme={theme} />\r\n          <TabButton active={activeTab === 'gallery'} onClick={() => setActiveTab('gallery')} icon={ImageIcon} theme={theme} />\r\n          <TabButton active={activeTab === 'music'} onClick={() => setActiveTab('music')} icon={Music} theme={theme} />\r\n          <TabButton active={activeTab === 'messages'} onClick={() => setActiveTab('messages')} icon={MessageCircle} theme={theme} />\r\n        </nav>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst TabButton = ({ active, icon: Icon, onClick, theme }) => (\r\n  <button onClick={onClick} className={`relative flex items-center justify-center w-10 h-10 rounded-full transition-all duration-300 ${active ? `${theme.navIcon} scale-110` : `text-white/40 hover:text-white/70 hover:scale-105`}`}>\r\n    <Icon size={20} fill={active ? \"currentColor\" : \"none\"} strokeWidth={active ? 0 : 1.5} />\r\n  </button>\r\n);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}